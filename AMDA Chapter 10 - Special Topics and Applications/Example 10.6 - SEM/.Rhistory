# load packages
library(fdir)
library(semTools)
library(lavaan)
library(mitml)
# set working directory to the location of this script
fdir::set()
# read data from working directory
imps <- read.table("/imps/imps.dat")
# read data from working directory
imps <- read.table("imps/imps.dat")
View(imps)
imps <- read.table("imps/imps.dat")
names(imps) <- c("Imputation","id", "bmi",
paste0("drive",seq(1:7)), paste0("diet",seq(1:5)), paste0("latdrive",seq(1:7)),paste0("latdiet",seq(1:5)))
# specify model
drive <- paste("drive =~", paste0("drive", 1:7, collapse = " + "))
diet <- paste("diet =~", paste0("diet", 1:5, collapse = " + "))
model <- c(drive,diet)
# fit model with semtools and lavaan
implist <- as.mitml.list(split(imps, imps$Imputation))
impList <- lapply(1:max(imps$Imputation),
function(m) imps[imps$imp == m, -1])
analysis <- cfa.mi(model, data = implist, std.lv = T, estimator = "mlr")
summary(analysis, fit = T)
indices <- c("chisq", "df", "pvalue", "ariv", "fmi", "rmsea.ci.lower","rmsea","rmsea.ci.upper","cfi","tli")
fitMeasures(analysis, fit.measures = indices)
fitMeasures(analysis, fit.measures = indices, test = "D2", pool.robust = TRUE)
# imputation-based modification indices
modindices.mi(analysis, op = c("~~","=~"), minimum.value = 10, sort. = TRUE)
analysis <- cfa.mi(model, data = implist, std.lv = T, estimator = "wls")
summary(analysis, standardized = T)
# imputation-based fit statistics
indices <- c("chisq", "df", "pvalue", "ariv", "fmi", "rmsea.ci.lower","rmsea","rmsea.ci.upper","cfi","tli")
fitMeasures(analysis, fit.measures = indices, test = "D2")
# example 10.6 - analyze latent fcs imputations with fiml
# load packages
library(fdir)
library(semTools)
library(lavaan)
library(mitml)
# set working directory to the location of this script
fdir::set()
# read data from working directory
imps <- read.table("imps/imps.dat")
names(imps) <- c("Imputation","id", "bmi",
paste0("drive",seq(1:7)), paste0("diet",seq(1:5)), paste0("latdrive",seq(1:7)),paste0("latdiet",seq(1:5)))
# specify model
drive <- paste("drive =~", paste0("latdrive", 1:7, collapse = " + "))
diet <- paste("diet =~", paste0("latdiet", 1:5, collapse = " + "))
model <- c(drive,diet)
# fit model with semtools and lavaan
implist <- as.mitml.list(split(imps, imps$Imputation))
analysis <- cfa.mi(model, data = implist, std.lv = T, estimator = "ml")
summary(analysis)
# imputation-based fit statistics
indices <- c("chisq", "df", "pvalue", "ariv", "fmi", "rmsea.ci.lower","rmsea","rmsea.ci.upper","cfi","tli")
fitMeasures(analysis, fit.measures = indices)
fitMeasures(analysis, fit.measures = indices, test = "D2", pool.robust = F)
# imputation-based modification indices
modindices.mi(analysis, op = c("~~","=~"), minimum.value = 10, sort. = TRUE)
